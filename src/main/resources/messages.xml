<?xml version="1.0" encoding="UTF-8"?>
<MessageCollection xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://findbugs.googlecode.com/svn/trunk/findbugs/etc/messagecollection.xsd">

	<Plugin>
		<ShortDescription>Guice</ShortDescription>
		<Details>Provides detectors relating to Guice: http://code.google.com/p/google-guice/</Details>
	</Plugin>

	<Detector class="uk.me.tom_fitzhenry.findbugs.guice.ScopingOnInterfacesDetector">
		<Details>
			Finds interfaces with scoping annotations.
		</Details>
	</Detector>
	
	<Detector class="uk.me.tom_fitzhenry.findbugs.guice.SuspiciousSubmoduleConfigurationDetector">
		<Details>
			Finds suspicious configuration of submodules.
		</Details>
	</Detector>
	
	<Detector class="uk.me.tom_fitzhenry.findbugs.guice.StaticFieldInjectionDetector">
		<Details>
			Finds static fields annotated with @Inject.
		</Details>
	</Detector>

	<BugPattern type="GUICE_SCOPE_ON_INTERFACE">
		<ShortDescription>Scope annotation on interfaces</ShortDescription>
		<LongDescription>Interface {0} is annotated with a scope, {1}.</LongDescription>
		<Details>
			<![CDATA[
			Guice does not support annotating an interface with a scope.
			
			<p>When Guice is asked to inject an interface that is annotated with a scope, it will throw a runtime exception.</p>
			
			<p>Recommended alternatives:
			<ul>
			    <li>Annotate the implementation (rather than the interface), or</li>
			    <li>Set the scope when defining the binding in a module, e.g.: 
			    <pre>bind(PaymentProcessor.class).to(CreditCardProcessor.class);</pre>
			    to 
			    <pre>bind(PaymentProcessor.class).to(CreditCardProcessor.class).in(MyScope.class);</pre></li>
			</ul>
			]]>
		</Details>
	</BugPattern>
	
	<BugPattern type="GUICE_SUSPICIOUS_SUBMODULE_CONFIGURATION">
		<ShortDescription>Suspicious submodule configuration</ShortDescription>
		<LongDescription>Modules should be configured via install(Module)</LongDescription>
		<Details>
			<![CDATA[
			Using Module.configure(Binder) to configure bindings will not bind the module's @Provider methods.
			
			<p>To correctly configure bindings, use AbstractModule.install(Module) (or Binder.install(Module), if your module don't extend AbstractModule).</p>
			
			<p>For example:
			<pre>
	public MyModule extends AbstractModule {
	    public void configure() {
	        new AnotherModule().configure(binder());
	    }
	}
			</pre>
			
			should be:
			<pre>
	public MyModule extends AbstractModule {
	    public void configure() {
	        install(new AnotherModule());
	    }
	}
			</pre>
			]]>
		</Details>
	</BugPattern>
	
	<BugPattern type="GUICE_STATIC_FIELD_INJECTION">
		<ShortDescription>Static field annotated with @Inject</ShortDescription>
		<LongDescription>Guice does not perform field injection on static fields.</LongDescription>
		<Details>
		Guice does not perform field injection on static fields.
		</Details>
	</BugPattern>
	
	<BugCode abbrev="GUICE">Guice bugcode abbreviation</BugCode>

</MessageCollection>
